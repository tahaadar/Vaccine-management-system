\chapter{Guidelines}
\hypertarget{md_guidelines}{}\label{md_guidelines}\index{Guidelines@{Guidelines}}
\label{md_guidelines_autotoc_md25}%
\Hypertarget{md_guidelines_autotoc_md25}%
\hypertarget{md_guidelines_autotoc_md26}{}\doxysection{\texorpdfstring{Compilação}{Compilação}}\label{md_guidelines_autotoc_md26}

\begin{DoxyItemize}
\item O programa deve ser compilado usando o comando {\ttfamily gcc -\/O3 -\/Wall -\/Wextra -\/Werror -\/Wno-\/unused-\/result}.
\item O compilador não deve apresentar erros ou avisos ("{}warnings"{}).
\item Recomenda-\/se usar a versão 7, ou superior, do compilador (consulte {\ttfamily gcc -\/-\/version}).
\item O sistema de avaliação automática usa a versão 12.\+3 do gcc.
\end{DoxyItemize}\hypertarget{md_guidelines_autotoc_md27}{}\doxysection{\texorpdfstring{Formatação}{Formatação}}\label{md_guidelines_autotoc_md27}

\begin{DoxyItemize}
\item A formatação do código deve ser {\bfseries{consistente}}. Deve utilizar o tabulador e não espaços brancos. Os editores permitem definir quantos espaços devem ser usados para representar o tabulador. Recomenda-\/se a utilização de um editor de texto com indentação automática.
\item Os carateres acentuados devem ser representados em UTF-\/8.
\item As linhas nunca não deverão exceder um limite de 80 caracteres\+: {\ttfamily wc -\/L}.
\item Abrir cada chaveta na mesma linha do cabeçalho da função. Fechar cada chaveta numa linha nova, também alinhada com o cabeçalho. O mesmo aplica-\/se às chavetas associadas aos comandos {\ttfamily for}, {\ttfamily if}, {\ttfamily switch}, e {\ttfamily while}.
\end{DoxyItemize}\hypertarget{md_guidelines_autotoc_md28}{}\doxysection{\texorpdfstring{Comentários}{Comentários}}\label{md_guidelines_autotoc_md28}

\begin{DoxyItemize}
\item Deve utilizar o formato Doxygen para produzir os comentários do código. Inicialmente, para gerar o ficheiro de configuração {\bfseries{Doxyfile}}, execute {\itshape doxygen -\/g}. Pode alterar os parâmetros em {\bfseries{Doxyfile}}, nomeadamente {\bfseries{PROJECT\+\_\+\+NAME}} e {\bfseries{EXTRACT\+\_\+\+ALL}}. Para gerar a documentação executar {\itshape doxygen Doxyfile}. A documentação em {\bfseries{HTML}} encontra-\/se em {\itshape html/index.\+html}.
\item O código deve que ser adequadamente comentado. Comentários em excesso devem ser evitados. Por exemplo, não é necessário comentar sobre uma variável que representa um contador de um ciclo.
\item Cada ficheiro deve ter um comentário, no início, com uma descrição sucinta e o(s) nome(s) do(s) autor(es).
\item Cada função deve ter um comentário, antes do cabeçalho, com uma descrição sucinta.
\item Cada variável global e/ou estática deve ter um comentário com uma descrição sucinta. O comentário pode ser colocado na mesma linha da declaração da variável, ou na linha anterior.
\end{DoxyItemize}\hypertarget{md_guidelines_autotoc_md29}{}\doxysection{\texorpdfstring{Organização do código}{Organização do código}}\label{md_guidelines_autotoc_md29}

\begin{DoxyItemize}
\item Não deve haver repetição de código (código repetido deverá ser colocado numa função).
\item Deve poupar memória, evitando repetições de valores.
\item Evite funções demasiado longas (e pouco legíveis).
\item Recomenda-\/se usar a ferramenta \href{http://www.lizard.ws/}{\texttt{ lizard}}, {\itshape pip install lizard}, para calcular a complexidade ciclométrica e o número de linhas de código. A ferramenta não deve emitir avisos. \begin{DoxyVerb}  lizard  -L 50 -T nloc=30 -C 12 -m proj.c
\end{DoxyVerb}

\end{DoxyItemize}\hypertarget{md_guidelines_autotoc_md30}{}\doxysection{\texorpdfstring{Constantes}{Constantes}}\label{md_guidelines_autotoc_md30}

\begin{DoxyItemize}
\item Constantes (números, strings) nunca devem aparecer directamente no código. Deverá ser usada a directiva {\ttfamily \#define} no início dos ficheiros ou num ficheiro {\ttfamily .h} separado.
\end{DoxyItemize}\hypertarget{md_guidelines_autotoc_md31}{}\doxysection{\texorpdfstring{Exemplo}{Exemplo}}\label{md_guidelines_autotoc_md31}

\begin{DoxyCode}{0}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#include<stdio.h>}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#define\ SZ\ 100}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ vals[SZ];}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ count;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ add(\textcolor{keywordtype}{int}\ val)\ \{}
\DoxyCodeLine{\ \ \ \ vals[count]\ =\ val;}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{return}\ ++count;}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ \mbox{\hyperlink{project_8c_ae00cb020530ccc5191b478f76860363f}{main}}()\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{int}\ n,\ v;}
\DoxyCodeLine{\ \ \ \ scanf(\textcolor{stringliteral}{"{}\%d"{}},\ \&n);}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{while}\ (n-\/-\/)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ scanf(\textcolor{stringliteral}{"{}\%d"{}},\ \&v);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ add(v);}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md_guidelines_autotoc_md32}{}\doxysection{\texorpdfstring{Opção {\ttfamily fsanitize}}{Opção {\ttfamily fsanitize}}}\label{md_guidelines_autotoc_md32}
A opção {\ttfamily fsanitize} é uma ferramenta útil para analisar o projecto, em particular erros de memória.

Para analisar um teste que está a falhar, deverá efetuar os seguintes passos\+:


\begin{DoxyEnumerate}
\item Compilar com as flags {\ttfamily -\/g -\/fsanitize=address}, e.\+g. {\ttfamily gcc -\/g -\/fsanitize=address -\/Wall -\/Wextra -\/Werror -\/Wno-\/unused-\/result -\/o proj proj.\+c}.
\item executar o projecto compilado usando o teste que está a falhar como standard input, e.\+g. \begin{DoxyVerb} $ ./proj < testes_publicos/teste27.in
\end{DoxyVerb}

\end{DoxyEnumerate}

Podem também ignorar o output do projecto por forma a ver só os erros da seguinte forma\+: \begin{DoxyVerb} $ ./proj < testes_publicos/teste27.in > /dev/null
\end{DoxyVerb}
\hypertarget{md_guidelines_autotoc_md33}{}\doxysection{\texorpdfstring{Valgrind}{Valgrind}}\label{md_guidelines_autotoc_md33}
É aconselhável analisar o projecto usando também a ferramenta Valgrind. Para instalar no Ubuntu\+: \begin{DoxyVerb}$ sudo apt install valgrind
\end{DoxyVerb}


Para analisar com o valgrind um teste que está a falhar, deverá efectuar os seguintes passos\+:


\begin{DoxyEnumerate}
\item Compilar com a flag {\ttfamily -\/g}, e.\+g. {\ttfamily gcc -\/g -\/Wall -\/Wextra -\/Werror -\/Wno-\/unused-\/result -\/o proj proj.\+c}.
\item executar o projecto compilado com o Valgrind usando o teste que está a falhar como standard input, e.\+g. \begin{DoxyVerb} $ valgrind ./proj < testes_publicos/teste27.in
\end{DoxyVerb}

\end{DoxyEnumerate}

Podem também ignorar o output do projecto por forma a ver só os erros da seguinte forma\+: \begin{DoxyVerb} $ valgrind ./proj < testes_publicos/teste27.in > /dev/null
\end{DoxyVerb}


{\itshape Nota\+:} O valgrind neste momento não tem suporte para Macs. Vejam a FAQ na página da disciplina sobre como instalar a aplicação leaks para Mac. Outras alternativas são utilizar uma máquina virtual com ubuntu, os computadores dos laboratórios, o nó sigma ({\ttfamily ssh ist1xxxxx@sigma.\+tecnico.\+ulisboa.\+pt} com password do fénix). 